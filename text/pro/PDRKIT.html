<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//ABISOURCE//DTD XHTML plus AWML 2.2//EN" "http://www.abisource.com/2004/xhtml-awml/xhtml-awml.mod">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:awml="http://www.abisource.com/2004/xhtml-awml/">
 <head>
  <!-- ======================================================= -->
  <!-- Created by AbiWord, a free, Open Source wordprocessor.  -->
  <!-- For more information visit http://www.abisource.com.    -->
  <!-- ======================================================= -->
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>PDRKIT.html</title>
  <style type="text/css">
   <!--
@media print, projection, embossed {
	body {
		padding-top:1in;
		padding-bottom:1in;
		padding-left:1.0000in;
		padding-right:1.0000in;
	}
}
body {
	font-family:'Times New Roman';
	font-variant:normal;
	text-indent:0in;
	widows:2;
	font-style:normal;
	font-weight:normal;
	text-decoration:none;
	color:#000000;
	text-align:left;
	font-size:12pt;
}
table {
}
td {
	border-collapse:collapse;
	text-align:left;
	vertical-align:top;
}
     -->
  </style>
 </head>
 <body>
  <div>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:18pt;color:##000000">Contents</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Introduction To Picture Driver Development &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Development Environment &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Development Kit Files &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Overview of Picture Driver Processing &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Reading Image Files &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Writing Image Files &nbsp;2</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Implementation Details &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Basic Data Types &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Setting up the REX Interface &nbsp;1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Runtime Library Support &nbsp;2</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Automatic Initialization and Cleanup &nbsp;2</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Coding the Pdr (rexlib_header) Structure &nbsp;2</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Providing Output Options &nbsp;4</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Extending the Image_file Structure &nbsp;5</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Reading Single-frame Images &nbsp;6</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">open_image_file() &nbsp;6</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">close_image_file() &nbsp;7</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">read_first_frame() &nbsp;7</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Reading Multi-frame Images &nbsp;8</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">read_delta_next() &nbsp;9</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Reading RGB Images &nbsp;9</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">rgb_seekstart() 10</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">rgb_readline() 11</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Writing Single-frame Images 11</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">create_image_file() 11</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">spec_best_fit() 12</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">save_frames() 13</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Writing Multi-frame Images 13</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">GFXLIB - Graphics Library Functions 14</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_rcel_copy 14</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_put_dot 14</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_get_dot 15</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_put_hseg 15</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_get_hseg 15</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_put_vseg 16</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_get_vseg 16</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_put_rectpix 16</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_get_rectpix 17</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_set_hline 17</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_set_vline 17</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_set_rect 18</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_set_rast 18</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_xor_rect 18</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_mask1blit 18</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_mask2blit 19</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_blitrect 20</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_tblitrect 20</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_swaprect 21</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_xor_rast 21</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_zoomblit 21</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_unbrun_rect 22</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_unss2_rect 23</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_unlccomp_rect 23</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_set_colors 24</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_wait_rast_vsync 24</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_uncc256 25</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_uncc64 25</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">SYSLIB - String, Memory, and Unbuffered I/O Functions 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">free 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">malloc 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">memcmp 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">memcpy 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">memset 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">strcmp 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">strcpy 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">strlen 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">zalloc 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_open 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_create 26</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_close 27</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_read 27</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_write 27</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_seek 27</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_tell 28</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_delete 28</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_rename 28</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_exists 28</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_ioerr 28</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_get_load_path 29</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_get_path_name 29</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_get_path_suffix 29</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">STDIOLIB - Standard C Stream I/O Functions 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">clearerr 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fclose 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">feof 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">ferror 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fflush 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fgetc 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fgets 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fopen 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fprintf 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fputc 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fputs 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fread 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fseek 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">ftell 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">fwrite 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">printf 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">rewind 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">sprintf 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">ungetc 30</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">pj_errno_errcode 30</span></p>
  </div>
  <div>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:18pt;color:##000000">Introduction To Picture Driver Development</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Autodesk Animator Pro has built in support for several image file formats. &nbsp;Loadable </span><span style="font-style:italic;color:##000000">picture driver</span><span style="color:##000000"> (PDR) modules support other picture and animation file formats. &nbsp;This document describes the techniques used to develop a loadable picture driver module.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Development Environment</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">You can develop a picture driver with any tools which support the Watcom -3s function cal­ling convention and the Phar Lap DOS extender. &nbsp;The kit is currently oriented primarily towards C (po­ssibly with some assembler code) as the development language. &nbsp;Tools which may be used to develop a PDR module include (but are not necessarily limited to)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Watcom C/386 (v8.0 or higher)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-MetaWare High C</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Other languages and compilers may also be compatible.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A picture driver module is compiled into a Phar Lap REX module. &nbsp;Animator Pro dynamically loads the REX module at runtime, when needed.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Development Kit Files</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The PDR development kit contains support libraries, a set of C-language header files, and source code for several example driver modules. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The following diagram shows the structure of the development kit, and provides a brief overview of the directories:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">\PICDRIVE</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> ├─ \INC- Header files.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> ├─ \LIB- Support libraries.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> ├─ \SKELETON- Skeleton code to clone from. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> ├─ \TARGA- Reads RGB image files.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> ├─ \RIF- Reads multiframe files.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> └─ \FLILO &nbsp;&nbsp;&nbsp;- Writes multiframe files.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;&nbsp;&nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Within the makefiles and linker response files of the example source code, all path references are relative to the current directory; there are no hard-coded path references. &nbsp;The PICDRIVE directory and its children can be installed at any location in your directory structure, including at the root, or with PICDRIVE as the child of another directory.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:18pt;color:##000000">Overview of Picture Driver Processing</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A picture driver can support any combination of the following features:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Read a single-frame or multi-frame image with a pixel depth of 1 thru 8 bits.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Read a single-frame image with a pixel depth of greater than 8 bits (ie, an RGB or Truecolor image).</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Write more or more frames of a flic into a single output file. &nbsp;The output file can be any pixel depth supported by the picture driver.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Provide a set of text strings which are used to build a menu of output options used to write an image file. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">It is unlikely that a single picture driver module will implement all these features. &nbsp;Most popular file formats require only a subset of these actions to fully support the format.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A picture driver is loaded and used by a host program. &nbsp;Two host programs currently exist, ANIPRO and ANICONV. &nbsp;ANIPRO is Autodesk Animator Pro itself. &nbsp;ANICONV is an image conversion utility supplied with Animator Pro. &nbsp;There are several small differences in the way these programs use a picture driver module, as follows:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-When a file format supports a variety of output options, such as differing data compression types, the ANICONV host can conduct options dialogs with the user before calling the driver's file creation function.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-ANIPRO does not support the output options dialogs. &nbsp;When the ANIPRO host uses a picture driver to create a file, the driver must apply reasonable defaults if multiple options exist.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-The ANICONV host can process RGB input data directly, converting it to a 256-color image using algorithms built in to ANICONV. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-The ANIPRO host cannot process RGB input data, and will thus never call the RGB-oriented input functions the driver provides.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">These differences require specific actions on the part of your driver (assuming reasonable defaults and informing the host when RGB data is present). &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Reading Image Files</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Picture drivers provide to the host a set of functions to read image files. &nbsp;The functions include </span><span style="font-style:italic;color:##000000">open</span><span style="color:##000000"> and</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> </span><span style="font-style:italic;color:##000000">close</span><span style="color:##000000"> file, </span><span style="font-style:italic;color:##000000">read first frame</span><span style="color:##000000">, </span><span style="font-style:italic;color:##000000">read next frame</span><span style="color:##000000">, and </span><span style="font-style:italic;color:##000000">read RGB line</span><span style="color:##000000">. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">For non-RGB images, the host will call the </span><span style="font-style:italic;color:##000000">open</span><span style="color:##000000"> function, and if it succeeds the </span><span style="font-style:italic;color:##000000">read first</span><span style="color:##000000"> function is called to load the image into a raster provided by the host. &nbsp;If the picture driver indicates that multiple frames exist in the input file, the host will call the </span><span style="font-style:italic;color:##000000">read next</span><span style="color:##000000"> function repeatedly, until all the images in the file have been loaded. &nbsp;After the file has been processed, the host calls the driver's </span><span style="font-style:italic;color:##000000">close</span><span style="color:##000000"> function.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Processing is slightly different for RGB images. &nbsp;If the </span><span style="font-style:italic;color:##000000">open</span><span style="color:##000000"> function indicated a pixel depth greater than 8 bits, the RGB-aware host will call the </span><span style="font-style:italic;color:##000000">read rgb line</span><span style="color:##000000"> function to obtain each line of input from the file. &nbsp;A host which cannot handle RGB data may attempt to call the normal </span><span style="font-style:italic;color:##000000">read first</span><span style="color:##000000"> function to process the image. &nbsp;In this case, the picture driver's </span><span style="font-style:italic;color:##000000">read first</span><span style="color:##000000"> routine must return </span><span style="font-weight:bold;color:##000000">Err_rgb_convert</span><span style="color:##000000"> to signal that the data can't be converted by the picture driver. &nbsp;(Of course, it is possible to write a picture driver which can perform an internal conversion of RGB to mapped pixels. &nbsp;In this case, the </span><span style="font-style:italic;color:##000000">read first</span><span style="color:##000000"> function would perform the conversion, and the host would be unaware that the data was originally in RGB format.)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">For a non-RGB image, the picture driver processes the entire image, and draws it to the raster using the GFX library functions described later in this document. &nbsp;For an RGB image, the picture driver returns the RGB data a line at a time into a buffer, and the host draws the data to the screen, after translating it to color mapped pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Writing Image Files</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Picture drivers provide to the host a set of functions to write images files. &nbsp;These include </span><span style="font-style:italic;color:##000000">create file</span><span style="color:##000000">, </span><span style="font-style:italic;color:##000000">close file</span><span style="color:##000000">, and </span><span style="font-style:italic;color:##000000">save frames</span><span style="color:##000000">. &nbsp;The driver can also provide a set of strings used to prompt the user for output options.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">To create an image file, the host calls the </span><span style="font-style:italic;color:##000000">create file</span><span style="color:##000000"> function (after processing any options dialogs specified by the driver). &nbsp;If the file creation suceeds, the host then calls the </span><span style="font-style:italic;color:##000000">save frames</span><span style="color:##000000"> function, passing a frame count, a pointer to a raster containing the image, and a pointer to a function to load the next frame into that raster when there are multiple output frames to save.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The picture driver's </span><span style="font-style:italic;color:##000000">save frames</span><span style="color:##000000"> function obtains the pixels from the raster using functions from the GFX host library described later in this document. &nbsp;It performs any data compression or formatting required by the output file format, and saves the data into the file using normal C I/O functions from the STDIOLIB host library.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:18pt;color:##000000">Implementation Details</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">To create a PDR module, you need to code several data structures which establish the interface between the host and your module. &nbsp;You also need to code several functions which the host will call to process image files. &nbsp;This chapter provides details on coding these items.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The SKELETON directory contains a do-nothing PDR module which you can copy and modify as needed to create a new PDR.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Basic Data Types</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The STDTYPES.H file defines several standard macros and data types which are used in PDR development. &nbsp;The macros are common C items, and have </span><span style="font-weight:bold;color:##000000">#ifdef</span><span style="color:##000000">/</span><span style="font-weight:bold;color:##000000">#endif</span><span style="color:##000000"> protective wrappers around them; they are defined only if you haven't already defined them. &nbsp;The items defined in STDTYPES.H and the assumptions made concerning integral C data types are listed below.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">&nbsp;</span><span style="text-decoration:underline;color:##000000">Data Type/MacroDescription</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">char</span><span style="color:##000000">Assumed to be signed or unsigned 8-bit</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">short</span><span style="color:##000000">Assumed to be signed 16-bit</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">int</span><span style="color:##000000">Assumed to be signed 32-bit</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">long</span><span style="color:##000000">Assumed to be signed 32-bit</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">BYTE &nbsp;&nbsp;</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">signed char</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">UBYTE &nbsp;</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">unsigned char</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">SHORT &nbsp;</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">signed short</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">USHORT </span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">unsigned short</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">LONG &nbsp;&nbsp;</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">signed long</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ULONG &nbsp;</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">unsigned long</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Pixel</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">unsigned char</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Ucoor</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">unsigned long</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Coor</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">long</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Boolean</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">int</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000">Typedef, </span><span style="font-weight:bold;color:##000000">int</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">NULL</span><span style="color:##000000"> Macro, defined as </span><span style="font-weight:bold;color:##000000">((void *)0)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">TRUE</span><span style="color:##000000"> &nbsp;&nbsp;&nbsp;Macro, defined as 1</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">FALSE</span><span style="color:##000000"> &nbsp;&nbsp;Macro, defined as 0</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">Macro, defined as 0</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Setting up the REX Interface</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The REX interface is a subsystem within Animator that loads and unloads PDR modules, and supplies the runtime service libraries (standard I/O, Poco builtin functions, etc). &nbsp;It is also calls the optional initialization and cleanup routines as it loads and unloads the PDR module.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A data structure named </span><span style="font-weight:bold;color:##000000">rexlib_header</span><span style="color:##000000"> provides the primary interface between the REX subsystem and your PDR module. &nbsp;Data in this structure informs the host of which support services you need (standard I/O library, etc), and also provides the host with the pointers to your implementation routines.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Runtime Library Support</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">PDR modules cannot be linked with a standard C runtime library, because runtime libraries are generally not compatible with the Phar Lap REX module format. &nbsp;The host provides several libraries of functions that fill the basic needs provided by a runtime library. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Each of these host libraries has an associated C header file which you must </span><span style="font-weight:bold;color:##000000">#include</span><span style="color:##000000"> in the PDR source code when you use the library's functions. &nbsp;Some of the libraries also have an associated LIB file, required at link time. &nbsp;Each library has a formal name which helps keep the REX interface layer "behind the scenes" and simplifies setting up PDR modules. &nbsp;The following table describes the host libraries available and the associated support files:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;text-decoration:underline;color:##000000">NameHeaderLink LIBFunctionality</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">AA_SYSLIBSYSLIB.HAASYSLIB.LIBMemory and &nbsp;string utils.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">AA_STDIOLIBSTDIOLIB.HSTDIOLIB.LIBStandard C I/O. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">AA_GFXLIBGFX.HGFXLIB.LIBGraphics.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Automatic Initialization and Cleanup</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A PDR module may contain initialization and cleanup routines which are automatically executed by the host when the module is loaded and unloaded. &nbsp;The init routine will be executed immediately after the PDR module is loaded, before the any PDR functions are called by the host. &nbsp;The cleanup routine is executed just before the PDR module is unloaded.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The init and cleanup routines may use host-provided library functions from any of the libraries listed above. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Coding the Pdr (rexlib_header) Structure</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">Pdr</span><span style="color:##000000"> structure makes the primary connection between your PDR code and the host. &nbsp;The </span><span style="font-weight:bold;color:##000000">Pdr</span><span style="color:##000000"> structure must be declared and pre-initialized as a global data item in</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> your driver, and it must be named </span><span style="font-weight:bold;color:##000000">rexlib_header</span><span style="color:##000000">. &nbsp;The </span><span style="font-weight:bold;color:##000000">Pdr</span><span style="color:##000000"> structure is defined in PICDRIVE.H, as follows:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">typedef struct pdr {</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Rexlib &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hdr;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;char &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*title_info;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;char &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*long_info;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;char &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_suffi[16];</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;ULONG &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_write_frames;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;ULONG &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_read_frames;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Boolean &nbsp;&nbsp;&nbsp;&nbsp;(*spec_best_fit)();</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Errcode &nbsp;&nbsp;&nbsp;&nbsp;(*create_image_file)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Errcode &nbsp;&nbsp;&nbsp;&nbsp;(*open_image_file)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;void &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*close_image_file)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Errcode &nbsp;&nbsp;&nbsp;&nbsp;(*read_first_frame)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Errcode &nbsp;&nbsp;&nbsp;&nbsp;(*read_delta_next)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Errcode &nbsp;&nbsp;&nbsp;&nbsp;(*save_frames)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Pdroptions *poptions;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Errcode &nbsp;&nbsp;&nbsp;&nbsp;(*rgb_seekstart)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;Errcode &nbsp;&nbsp;&nbsp;&nbsp;(*rgb_readline)()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;long &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reserved[4];</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;} Pdr;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">hdr</span><span style="color:##000000"> field contains information for the REX loader within the host program. &nbsp;You initialize this field with pointers to your auto-init and auto-cleanup functions, and some standard values, as follows:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;{REX_PICDRIVER,PDR_VERSION,init,cleanup,HLIB_LIST}</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">If you don't have an init or cleanup function, code the constant </span><span style="font-weight:bold;color:##000000">NOFUNC</span><span style="color:##000000"> for thoses entries.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">title_info</span><span style="color:##000000"> field is a pointer to a 1-line description of your driver which is displayed on the host's driver selection menu. &nbsp;Only the first 34 characters of the string are displayed.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">long_info</span><span style="color:##000000"> field contains a full description of your driver. &nbsp;There is no limit on the length of the text. &nbsp;The text is word-wrapped as needed by the host; a newline character will force a displayed newline.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">default_suffi</span><span style="color:##000000"> field holds file suffi which are displayed in the file selector dialog buttons. &nbsp;If more than one suffix is given, they should be separated with semicolons (</span><span style="font-weight:bold;color:##000000">".PI1;.PI2;.PI3"</span><span style="color:##000000">). &nbsp;A maximum of 3 suffi may be given.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">max_write_frames</span><span style="color:##000000"> field indicates the maximum number of frames that can be written to a single file in your format. &nbsp;A value of 1 indicates a still-image file format. &nbsp;A value of 0 indicates that your driver reads files but does not write them.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">max_read_frames</span><span style="color:##000000"> field indicates the maximum number of frames that can be read from a single file in your format. &nbsp;A value of 1 indicates a still-image file format. &nbsp;A value of 0 indicates that your driver writes files but does not read them.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">poptions</span><span style="color:##000000"> field is a pointer to a </span><span style="font-weight:bold;color:##000000">Pdroptions</span><span style="color:##000000"> structure which describes the output options your</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> driver supports. &nbsp;This field is optional, and must be set to </span><span style="font-weight:bold;color:##000000">NULL</span><span style="color:##000000"> if your driver doesn't support output options. &nbsp;The </span><span style="font-weight:bold;color:##000000">Pdroptions</span><span style="color:##000000"> structure is discussed in detail below.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">reserved</span><span style="color:##000000"> field is reserved for future expansion. &nbsp;You must initialize this field to zeros. &nbsp;(In C, this can be done by failing to provide any initialization values in the declaration, as usual.)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The remaining fields are pointers to the functions that provide the read/write functionality for your file format. &nbsp;These are discussed in detail below. &nbsp;For any function you don't implement in your driver, supply a value of </span><span style="font-weight:bold;color:##000000">NOFUNC</span><span style="color:##000000"> in the </span><span style="font-weight:bold;color:##000000">Pdr</span><span style="color:##000000"> structure.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Providing Output Options</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">&nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Some image file formats provide several ways to store the picture data within the file. &nbsp;The host program can conduct dialogs for you, to ask the user for selections among the various options. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Up to four separate categories of options may be specified. &nbsp;Within each category, there may be as many as eight selections to choose from. &nbsp;The host conducts one dialog for each category. &nbsp;The dialog presents the selections to the user; the user can select any one of the items in each category. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Not all hosts support the options interface to a picture driver. &nbsp;Your driver must assume reasonable defaults for the options, so that it will work correctly with any host. &nbsp;Currently, Animator Pro itself does not conduct options dialogs, but the image conversion utility delivered with Animator Pro does. &nbsp;It is also possible to write a Poco program that runs from within Animator and accesses a PDR directly. &nbsp;That Poco program may conduct the options dialogs (this requires PDRACCES.POE from the Animator Pro Bonus Pack).</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">&nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">Pdroptions</span><span style="color:##000000"> structure is used to pass text strings describing the options to the host program, and to return the requested options to your driver. &nbsp;It is defined in PICDRIVE.H as follows:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">typedef struct pdr_options {</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;char &nbsp;&nbsp;&nbsp;*choicelst1;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;char &nbsp;&nbsp;&nbsp;*choicelst2;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;char &nbsp;&nbsp;&nbsp;*choicelst3;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;char &nbsp;&nbsp;&nbsp;*choicelst4;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;UBYTE &nbsp;&nbsp;options_valid;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;UBYTE &nbsp;&nbsp;option1;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;UBYTE &nbsp;&nbsp;option2;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;UBYTE &nbsp;&nbsp;option3;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;UBYTE &nbsp;&nbsp;option4;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;} Pdroptions;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">choicelst</span><span style="color:##000000"> fields are pointers to string that contain the items for the options dialogs. &nbsp;Within</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> each string are a series of items delimited by newline characters. &nbsp;The first substring is the title placed in the dialog box. &nbsp;The remaining substrings are the option choices. &nbsp;The last substring should always be </span><span style="font-style:italic;color:##000000">Cancel</span><span style="color:##000000">. &nbsp;If the user picks the last option (regardless of the actual string text) the host aborts the Save Picture or Save Flic operation in progress without ever calling the PDR </span><span style="font-style:italic;color:##000000">create file</span><span style="color:##000000"> function.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">options_valid</span><span style="color:##000000"> field indicates to the driver whether the host conducted options dialogs or not. &nbsp;If zero, no dialogs were conducted, and the driver must use its default options. &nbsp;If non-zero, the values in the </span><span style="font-weight:bold;color:##000000">option</span><span style="color:##000000"> fields are valid.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">option</span><span style="color:##000000"> fields contain the numeric index of the option selections made by the user. &nbsp;This value ranges from zero to the number of selections you provided minus 1. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">In some of the example programs, the title string for each option category is defined using the </span><span style="font-weight:bold;color:##000000">RL_KEYTEXT()</span><span style="color:##000000"> macro. &nbsp;We use this macro to make connections to Animator Pro's menu (AA.MU) file. &nbsp;You should </span><span style="font-weight:bold;font-style:italic;color:##000000">not</span><span style="color:##000000"> use this macro when setting up options strings in your driver, because the AA.MU file will not contain &nbsp;entries for your driver, and runtime errors will result.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The SKELETON example program contains an example of setting up options data in a picture driver.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Extending the Image_file Structure</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Your driver </span><span style="font-style:italic;color:##000000">open</span><span style="color:##000000"> or </span><span style="font-style:italic;color:##000000">create</span><span style="color:##000000"> functions return to the host a pointer to an </span><span style="font-weight:bold;color:##000000">Image_file</span><span style="color:##000000"> structure. &nbsp;The host passes this pointer back to your driver's read and write functions. &nbsp;You can extend this structure, or embed it within a larger structure of your own, so that in effect the host passes your I/O functions a pointer to your major control data structure. &nbsp;Some of the example drivers use this technique. &nbsp;If you embed the </span><span style="font-weight:bold;color:##000000">Image_file</span><span style="color:##000000"> structure within your own larger structure, the </span><span style="font-weight:bold;color:##000000">Image_file</span><span style="color:##000000"> structure must appear first.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">Image_file</span><span style="color:##000000"> structure is defined in PICDRIVE.H, as follows: &nbsp;&nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">typedef struct image_file {</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;struct pdr *pd; &nbsp;&nbsp;&nbsp;&nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;UBYTE write_mode; &nbsp;&nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;UBYTE needs_work_cel;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;} Image_file;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">pd</span><span style="color:##000000"> field is a pointer to your </span><span style="font-weight:bold;color:##000000">Pdr</span><span style="color:##000000"> structure, defined in your code as </span><span style="font-weight:bold;color:##000000">rexlib_header</span><span style="color:##000000">. &nbsp;This is set by the host; do not change it.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">write_mode</span><span style="color:##000000"> field is set to zero when the file is opened for reading, or non-zero if the file is opened</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> for writing. &nbsp;(IE, it indicates whether the file was opened via a call to your </span><span style="font-weight:bold;color:##000000">open_ifile</span><span style="color:##000000"> or </span><span style="font-weight:bold;color:##000000">create_ifile</span><span style="color:##000000">. &nbsp;This is set by the host; do not change it.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">needs_work_cel</span><span style="color:##000000"> field indicates whether your driver needs a work raster in addition to the main raster to create an image file. &nbsp;This field is set by your driver. &nbsp;When your </span><span style="font-weight:bold;color:##000000">create_ifile</span><span style="color:##000000"> function sets this field to non-zero, the host allocates a work raster for you, and passes the raster pointer to your output function. &nbsp;This is used primarily by animation file formats which generate image data based on the deltas between the prior and current frames. &nbsp;The work raster can be used to hold a copy of the prior frame.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Reading Single-frame Images</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The picture driver provides three major functions to the host for reading non-RGB single-frame images:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-</span><span style="font-weight:bold;color:##000000">open_image_file()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-</span><span style="font-weight:bold;color:##000000">close_image_file()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-</span><span style="font-weight:bold;color:##000000">read_first_frame()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The following sections contain details on coding each of these functions.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">open_image_file()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode open_image_file(Pdr *pd, char *path,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Image_file **pif, Anim_info *ainfo);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function serves both as a 'detect' function, and as a prelude to actually loading an image file. &nbsp;When the user requests a Load Picture operation, the host will first try the PDR module selected by the user. &nbsp;If the </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function in that PDR responds with </span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">, the host uses that PDR to process the image.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">When the pre-selected PDR's </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function returns an error status, the host then tries every PDR available, calling the </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function in each. &nbsp;The first PDR which responds with </span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">, is used to load the image.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Because of the logic used by the host to find an available PDR to cope with any given file, your PDR's </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function must return </span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">&nbsp;</span><span style="font-style:italic;color:##000000">only</span><span style="color:##000000"> if it recognizes the data in the file and is capable of processing it. &nbsp;Do not rely solely on the filename or filetype, open the file and read enough of it to verify that it contains data in the format you expected. &nbsp;</span><span style="font-style:italic;color:##000000">Never</span><span style="color:##000000"> code a PDR module which always returns </span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000"> from the </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function! </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> Doing so effectively disables other picture drivers in the system.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> should do only the work needed to determine that it can handle a given file. &nbsp;Keeping this to a minimum helps overall performance of the host program, since the host tries every PDR until one is found that can handle a given file. &nbsp;In general, attempt to reject a file as quickly as possible when it's not a format your driver understands.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Because the host uses </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> both as a detector function and as a prelude to actually reading the file, the sequence of calls to load a picture is:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Load PDR, call its </span><span style="font-weight:bold;color:##000000">init()</span><span style="color:##000000"> if there is one.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000">, which returns </span><span style="font-weight:bold;color:##000000">Success.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> again.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call PDR's </span><span style="font-weight:bold;color:##000000">cleanup()</span><span style="color:##000000"> if there is one, then unload the module.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">In other words, any number of open/close or open/read/close sequences may occur while the PDR is loaded. &nbsp;The host will never open more than one file at a time using the same instance of a PDR. &nbsp;(IE, the PDR must be serially reusable, but need not be reentrant.)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">close_image_file()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode close_image_file(Image_file **pif);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host calls </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000"> when it's done processing the file. &nbsp;Any resources (file handles, memory, etc) aquired at </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> time should be freed during the </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000"> processing.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host calls this function for image files opened with either </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> or </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000">. &nbsp;You can use the </span><span style="font-weight:bold;color:##000000">write_mode</span><span style="color:##000000"> flag in the </span><span style="font-weight:bold;color:##000000">Image_file</span><span style="color:##000000"> structure to determine how the file was opened, if necessary.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">read_first_frame()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode read_first_frame(Image_file *ifile,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> Rcel *screen);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000"> function is used to load the image into the raster provided by the host. &nbsp;This host</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> calls this function only after </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> has returned </span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The processing steps generally taken by a driver's </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000"> function are:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Clear the raster using </span><span style="font-weight:bold;color:##000000">pj_set_rast()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-If the file format includes color palette information, process it into </span><span style="font-weight:bold;color:##000000">Cmap</span><span style="color:##000000"> format (as defined in CMAP.H), and use </span><span style="font-weight:bold;color:##000000">pj_cmap_load()</span><span style="color:##000000"> to load the colors into the raster's color map.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Read the pixels from the file, decompressing or otherwise processing as necessary to get them into a byte-per-pixel format. &nbsp;Write the pixels into the raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Return to the host caller after the entire image has been loaded.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">If necessary, the color palette can be loaded after the pixel data, if required by the data format in the file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Any of the GFX library output routines can be used to render the pixels on the destination raster. &nbsp;We recommend that you avoid using </span><span style="font-weight:bold;color:##000000">pj_put_dot()</span><span style="color:##000000"> for performance reasons. &nbsp;The most useful GFX functions will be probably be </span><span style="font-weight:bold;color:##000000">pj_pug_hseg()</span><span style="color:##000000"> to write a line at a time to the raster, or </span><span style="font-weight:bold;color:##000000">pj_put_rectpix()</span><span style="color:##000000"> to write several lines at a time. &nbsp;Other functions, such as </span><span style="font-weight:bold;color:##000000">pj_mask1blit()</span><span style="color:##000000">, might also be useful if you are loading a 1-bit-per-pixel image, for example.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host handles all issues involving clipping and/or centering the image when it doesn't match the physical screen dimensions. &nbsp;You can just assume that the raster you are drawing to is the exact same size as the image width and height values your </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function loaded into the host's </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000"> structure. &nbsp;(Indeed, it is mandatory that you make this assumption for the convert utilty's scaling operations to function correctly.)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Reading Multi-frame Images</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A driver that supports multiple-frame image file formats (ie, animation files) indicates this fact to the host by setting the </span><span style="font-weight:bold;color:##000000">max_read_frames</span><span style="color:##000000"> field of the </span><span style="font-weight:bold;color:##000000">Pdr</span><span style="color:##000000"> structure to a value greater than 1. &nbsp;In this case, the driver provides an additional input function, </span><span style="font-weight:bold;color:##000000">read_delta_next()</span><span style="color:##000000">, described below.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">When your driver supports multi-frame input, and your </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> sets the </span><span style="font-weight:bold;color:##000000">num_frames</span><span style="color:##000000"> field in the host's </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000"> structure to a value greater than 1, the host makes the following sequence of calls to load the frames:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Load PDR, call its </span><span style="font-weight:bold;color:##000000">init()</span><span style="color:##000000"> if there is one.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000">, which returns </span><span style="font-weight:bold;color:##000000">Success.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> again.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">read_delta_next()</span><span style="color:##000000"> repeatedly to get the rest of the frames.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call PDR's </span><span style="font-weight:bold;color:##000000">cleanup()</span><span style="color:##000000"> if there is one, then unload the module.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host calls </span><span style="font-weight:bold;color:##000000">read_delta_next()</span><span style="color:##000000"> repeatedly until </span><span style="font-weight:bold;color:##000000">num_frames</span><span style="color:##000000"> have been loaded.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">read_delta_next()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode read_delta_next(Image_file *ifile,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Rcel *screen);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">This function will only be called after the file has been opened, and the first frame has been loaded using </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000">. &nbsp;Upon entry, the raster provided by the host holds a copy of the prior frame. &nbsp;Your </span><span style="font-weight:bold;color:##000000">read_delta_next()</span><span style="color:##000000"> routine manipulates this image in whatever way is necessary to generate the next frame. &nbsp;(This may involve applying deltas to the image already in the raster based on the next chunk of data in an animation file, or it may involve simply clearing the raster and loading the next image from the input file.) &nbsp;The manipulation may include changes to the pixels and/or color palette. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Reading RGB Images</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">RGB images (as opposed to color-mapped images) are handled differently in the host &lt;-&gt; driver interface. &nbsp;Some host programs include logic to directly read RGB pixels and convert the image into a color-mapped representation. &nbsp;Other host programs do not contain the conversion code. &nbsp;There is no way for the driver to determine whether the host can handle RGB input. &nbsp;Only single-frame images are handled by the RGB interface to a PDR.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">When the driver's </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> function detects a file containing RGB data, it must set the </span><span style="font-weight:bold;color:##000000">pdepth</span><span style="color:##000000"> field of the host's </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000"> structure to a value greater than 8.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A host that can handle RGB input will use the driver's </span><span style="font-weight:bold;color:##000000">rgb_seekstart()</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">rgb_readline()</span><span style="color:##000000"> routines to process the data, instead of calling </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000">. &nbsp;A host which cannot handle direct RGB input will call the driver's </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000"> function. &nbsp;This allows the option of writing a driver that has its own RGB to color mapped conversion code. &nbsp;If your driver doesn't contain such conversion logic, your </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000"> routine should return </span><span style="font-weight:bold;color:##000000">Err_rgb_convert</span><span style="color:##000000"> to indicate that it can't perform the conversion internally. &nbsp;The user will then be prompted to use the Animator Pro image conversion utility to process the picture.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">When the host </span><span style="font-style:italic;color:##000000">cannot</span><span style="color:##000000"> handle RGB input directly, it makes the following sequence of calls:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Load PDR, call its </span><span style="font-weight:bold;color:##000000">init()</span><span style="color:##000000"> if there is one.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000">, which sets </span><span style="font-weight:bold;color:##000000">pdepth</span><span style="color:##000000"> to a value greater than 8 and returns </span><span style="font-weight:bold;color:##000000">Success.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> again. &nbsp;(It agains sets </span><span style="font-weight:bold;color:##000000">pdepth</span><span style="color:##000000"> greater than 8.)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">read_first_frame()</span><span style="color:##000000">. &nbsp;This either performs the RGB conversion internally and leaves the resulting image in the host-provided raster, or it simply returns </span><span style="font-weight:bold;color:##000000">Err_rgb_convert</span><span style="color:##000000"> to indicate it can't handle the image internally.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call PDR's </span><span style="font-weight:bold;color:##000000">cleanup()</span><span style="color:##000000"> if there is one, then unload the module.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">When the host </span><span style="font-style:italic;color:##000000">can</span><span style="color:##000000"> handle RGB input directly, it makes the following sequence of calls:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Load PDR, call its </span><span style="font-weight:bold;color:##000000">init()</span><span style="color:##000000"> if there is one.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000">, which sets </span><span style="font-weight:bold;color:##000000">pdepth</span><span style="color:##000000"> to a value greater than 8 and returns </span><span style="font-weight:bold;color:##000000">Success.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> again. &nbsp;(It agains sets </span><span style="font-weight:bold;color:##000000">pdepth</span><span style="color:##000000"> greater than 8.)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">rgb_seekstart()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">rgb_readline()</span><span style="color:##000000"> once for each line in the file. &nbsp;The line count is determined by the value set into </span><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000"> by </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">rgb_seekstart()</span><span style="color:##000000"> again.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">rgb_readlines()</span><span style="color:##000000"> repeatedly again, to read all the lines a second time.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call PDR's </span><span style="font-weight:bold;color:##000000">cleanup()</span><span style="color:##000000"> if there is one, then unload the module.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The RGB-aware host makes two passes through the data in the file. &nbsp;The first pass builds a color map, and the second pass fits the pixels to the map and renders them to the raster. &nbsp;There is no need for the driver to render directly to the raster with an RGB-aware host.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">rgb_seekstart()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode rgb_seekstart(Image_file *ifile);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">rgb_seekstart()</span><span style="color:##000000"> function is a signal from the host to the driver that the next call to </span><span style="font-weight:bold;color:##000000">rgb_readline()</span><span style="color:##000000"> should return the first line of pixels from the data stream. &nbsp;This may involve seeking to the start of the data in the image file, setting internal flags the </span><span style="font-weight:bold;color:##000000">rgb_readline()</span><span style="color:##000000"> routine uses, or other internal actions as needed by the driver.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The return value from this function informs the host of how the image is stored in the file. &nbsp;A value of zero (</span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">) indicates that the image is rightside</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br />-up; the first line returned by </span><span style="font-weight:bold;color:##000000">rgb_readline()</span><span style="color:##000000"> is displayed at the top of the screen. &nbsp;A return value greater than zero indicates the image is upside-down; the first line returned by </span><span style="font-weight:bold;color:##000000">rgb_readline()</span><span style="color:##000000"> is displayed at the bottom of the screen. &nbsp;A negative return value indicates an error, as usual.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">rgb_readline()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode rgb_readline(Image_file *ifile, </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Rgb3 *linebuf);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">This function returns the next line of RGB pixels in the buffer provided by the caller. &nbsp;The pixels are stored into the buffer in </span><span style="font-weight:bold;color:##000000">Rgb3</span><span style="color:##000000"> format. &nbsp;The </span><span style="font-weight:bold;color:##000000">Rgb3</span><span style="color:##000000"> structure (defined in CMAP.H) provides a full byte for each of the red, green, and blue components. &nbsp;The buffer will contain </span><span style="font-weight:bold;color:##000000">3*width</span><span style="color:##000000"> bytes, based on the width set into the host's </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000"> structure by the </span><span style="font-weight:bold;color:##000000">open_image_file()</span><span style="color:##000000"> routine.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host expects each of the RGB components to be 8 bits. &nbsp;Your driver must scale smaller bit depths up to 8-bit levels when the source data's pixel depth is less than 8 bits per red, green, or blue component.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Writing Single-frame Images</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The picture driver provides four major functions for writing single-frame images:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-</span><span style="font-weight:bold;color:##000000">create_image_file()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-</span><span style="font-weight:bold;color:##000000">close_image_file()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-</span><span style="font-weight:bold;color:##000000">spec_best_fit()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-</span><span style="font-weight:bold;color:##000000">save_frames()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The following sections contain details on coding each of these functions.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">In general, the host will make the following sequence of calls to write one or more image frames to a file:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Load PDR, call its </span><span style="font-weight:bold;color:##000000">init()</span><span style="color:##000000"> if there is one.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">spec_best_fit()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000">, which returns </span><span style="font-weight:bold;color:##000000">Success.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call </span><span style="font-weight:bold;color:##000000">close_image_file()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-Call PDR's </span><span style="font-weight:bold;color:##000000">cleanup()</span><span style="color:##000000"> if there is one, then unload the module.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">create_image_file()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode create_image_file(struct pdr *pd, </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;char *path, </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;Image_file **pif,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;Anim_info *spec );</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host calls </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000"> to begin output of an image (or series of images). &nbsp;The driver allocates any needed resources, creates the physical file, and stores the values from the host's </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000"> structure into local storage for later use in the </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000"> function.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">If the output file already exists, the driver must arbitrarily recreate it anew. &nbsp;The user has already been prompted, and has confirmed the intention to overwrite the existing file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">If your driver needs a work raster, the </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000"> function should set the </span><span style="font-weight:bold;color:##000000">needs_work_raster</span><span style="color:##000000"> field of the </span><span style="font-weight:bold;color:##000000">Image_file</span><span style="color:##000000"> structure to </span><span style="font-weight:bold;color:##000000">TRUE</span><span style="color:##000000">. &nbsp;The host will then allocate a work raster and provide a pointer to it when it calls </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">spec_best_fit()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Boolean spec_best_fit(Anim_info *spec);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host calls </span><span style="font-weight:bold;color:##000000">spec_best_fit()</span><span style="color:##000000"> before calling the </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000"> function. &nbsp;The host uses </span><span style="font-weight:bold;color:##000000">spec_best_fit()</span><span style="color:##000000"> to determine whether the image can be stored exactly as the user requested, in terms of:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-width</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-height</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-pixel depth</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-frame count</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;-aspect ratio</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The values are stored in the </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000"> structure passed from the host to the </span><span style="font-weight:bold;color:##000000">spec_best_fit()</span><span style="color:##000000"> function. &nbsp;The driver should examine the values in these fields, and if it can comply with the request, return </span><span style="font-weight:bold;color:##000000">TRUE</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">If the driver cannot comply with the request exactly, it should modify the offending field to the value representing the closest thing the driver can do, and return </span><span style="font-weight:bold;color:##000000">FALSE</span><span style="color:##000000"> to indicate that the fit is not exact. &nbsp;An example of this would be when the host wants to save a 200x100 image, but the driver's format is limited to 320x200. &nbsp;In this case, the driver would load 320x200 into the </span><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000"> fields in the </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000"> and return </span><span style="font-weight:bold;color:##000000">FALSE</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">When </span><span style="font-weight:bold;color:##000000">spec_best_fit()</span><span style="color:##000000"> returns </span><span style="font-weight:bold;color:##000000">FALSE</span><span style="color:##000000">, the host builds a virtual raster that matches the new values in the </span><span style="font-weight:bold;color:##000000">Anim_info</span><span style="color:##000000">. &nbsp;The virtual raster will properly clip an oversized image, or read zeroes around the edges of an undersized image, so that your </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000"> routine need not deal with clipping and offsets when reading from the input raster. &nbsp;The new values are also passed</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> to your </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000"> function (IE, if you indicated you can only do 320x200, then those values will be passed </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000">). &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">save_frames()</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Prototype:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">typedef Errcode (*Sfunc_t)(int ix,void *sdata);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode save_frames(Image_file *ifile,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;Rcel *screen,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;int num_frames,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;Sfunc_T *seek_func,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;void *seek_data,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;Rcel *work_screen );</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The host calls </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000"> after a successfull call to </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000">. &nbsp;Your </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000"> routine writes one or more frames to the output file, based on the </span><span style="font-weight:bold;color:##000000">frame_count</span><span style="color:##000000"> paramter passed to it by the host. &nbsp;The frame count will only be greater than one only if the driver's </span><span style="font-weight:bold;color:##000000">Pdr</span><span style="color:##000000"> structure indicates it can handle multiple frames.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The driver reads color map information and pixels from the raster provided by the host, and writes the information to a file. &nbsp;The functions in the GFX library are used to read pixels from the host's raster. &nbsp;The color map is accessed directly via the </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Cmap</span><span style="color:##000000"> pointer in the raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Writing Multi-frame Images</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Writing multiple frames is very similar to writing a single frame. &nbsp;The primary difference is that the host passes to the </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000"> routine a pointer to a </span><span style="font-style:italic;color:##000000">seek</span><span style="color:##000000"> function, and a </span><span style="font-style:italic;color:##000000">seek data</span><span style="color:##000000"> parameter. &nbsp;After writing each frame to the file, the driver calls the host's seek function, passing the seek data and the index of the frame to seek to. &nbsp;(The index is zero-based.) &nbsp;Each call to the host's seek causes the next image to be placed into the host's raster. &nbsp;Your </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000"> routine loops through the frames until the number of frames indicated by the </span><span style="font-weight:bold;color:##000000">frame_count</span><span style="color:##000000"> parameter have been written.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">If your </span><span style="font-weight:bold;color:##000000">create_image_file()</span><span style="color:##000000"> routine set the </span><span style="font-weight:bold;color:##000000">needs_work_raster</span><span style="color:##000000"> field to </span><span style="font-weight:bold;color:##000000">TRUE</span><span style="color:##000000">, the host also provides a work raster in the paramters to </span><span style="font-weight:bold;color:##000000">save_frames()</span><span style="color:##000000">. &nbsp;&nbsp;When your output format is delta-based, we recommend that you copy the current frame image into the work raster, then seek to the next frame, and base your deltas on the difference between the work and current rasters. &nbsp;Avoid excessive calls to the host's seek function for best performance.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">A call to the host's seek function that specifies the index of the current frame will not change the contents of the current raster. &nbsp;But, it does pass</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> through the host's abort-check logic, and can be used as a way of occasionally polling for a user-requested abort.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">GFXLIB - Graphics Library Functions</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The graphics functions operate on the pixel data stored in a raster. &nbsp;They work on any type of raster (e.g., RAM rasters, video hardware rasters). &nbsp;They support simple drawing (dots, lines, segments) and complex blits (keyed blits, masked blits, zoom blits, etc). &nbsp;They do not support complex drawing operations such as circles and polygons.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">These functions are the documented interface to the I/O library attached to a raster. &nbsp;Do </span><span style="font-style:italic;color:##000000">not</span><span style="color:##000000"> call raster I/O functions directly through the raster's </span><span style="font-weight:bold;color:##000000">lib</span><span style="color:##000000"> pointer. &nbsp;The graphics functions documented below contain logic to resolve differences in raster types (eg, blit from hardware to RAM); the direct entry points will fail without the pre-conditioning of parms done by the documented functions.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">All of the functions listed below perform clipping when the operation would exceed the boundaries of the destination raster. &nbsp;For each </span><span style="font-weight:bold;color:##000000">pj_whatever()</span><span style="color:##000000"> function listed below, there is also a </span><span style="font-weight:bold;color:##000000">pj__whatever()</span><span style="color:##000000"> function (two underbars after the </span><span style="font-weight:bold;color:##000000">pj</span><span style="color:##000000">) which is an unclipped version. &nbsp;If you call an unclipped raster output function with coordinates that cause data to be placed off the raster, you generally get a page fault or other fatal error which crashes Animator and causes the loss of the end user's work-in-progress.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode pj_rcel_copy(FlicRaster *psource, FlicRaster *pdest)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies all pixel and color map data from the source raster into the destination raster. &nbsp;The source and destination rasters may be of any type (including differing types), but they must be exactly the same size (width, height and depth).</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">psource</span><span style="color:##000000">The source raster handle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pdest</span><span style="color:##000000">The destination raster handle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:</span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">, or a standard error code as defined in PJECODES.H</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_put_dot(FlicRaster *r, Pixel color, Coor x, Coor y);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Sets a single pixel to the specified color. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">color</span><span style="color:##000000">Color of the pixel.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">X position.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Y position.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Pixel pj_get_dot(FlicRaster *r, Coor x, Coor y);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Returns the color of a single pixel. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">X position.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Y position.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:Color of the pixel, or zero if clipped.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_put_hseg(FlicRaster *r, void *pixbuf, Coor x, Coor y, Ucoor w);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies pixels from </span><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000"> to a horizontal line segment in the raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">Memory buffer containing pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">X coordinate of left end of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Y coordinate of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">w</span><span style="color:##000000">Width of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_get_hseg(FlicRaster *r, void *pixbuf, Ucoor x, Ucoor y, Ucoor w);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies pixels from a horizontal line segment in the raster to </span><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">Memory buffer to receive pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">X coordinate of left end of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Y coordinate of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">w</span><span style="color:##000000">Width of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_put_vseg(FlicRaster *r, void *pixbuf, Ucoor x, Ucoor y, Ucoor h);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies pixels from </span><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000"> to a vertical line segment in the raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">Memory buffer containing the pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">X coordinate of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Y coordinate of top of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">h</span><span style="color:##000000">Height of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_get_vseg(FlicRaster *r, void *pixbuf, Ucoor x, Ucoor y, Ucoor h);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies pixels from a vertical segment in the raster to </span><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">Memory buffer to receive the pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">X coordinate of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Y coordinate of top of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">h</span><span style="color:##000000">Height of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_put_rectpix(FlicRaster *r, void *pixbuf, Coor x, Coor y, Ucoor w, Ucoor h);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies pixels from a memory buffer to a rectangle in the raster. &nbsp;The memory buffer is a two-dimensional array of pixels with the top horizontal line of pixels first and the bottom horizontal line of pixels last (ie, </span><span style="font-weight:bold;color:##000000">Pixel pixbuf[h][w]</span><span style="color:##000000">).</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">Memory buffer containing the pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">Left edge of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Top edge of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">w</span><span style="color:##000000">Width of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">h</span><span style="color:##000000">Height of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_get_rectpix(FlicRaster *r, void *pixbuf, Coor x, Coor y, Ucoor w, Ucoor h);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies pixels from a rectangle in the raster to a memory buffer. &nbsp;The memory buffer is organized as two-dimensional array with the same format used by </span><span style="font-weight:bold;color:##000000">pj_put_rectpix()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixbuf</span><span style="color:##000000">Memory buffer to receive the pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">Left edge of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Top edge of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">w</span><span style="color:##000000">Width of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">h</span><span style="color:##000000">Height of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_set_hline(FlicRaster *r, Pixel color, Coor x, Coor y, Ucoor w);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Draws a solid horizontal line segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">color</span><span style="color:##000000">Color of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">Left end of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Y coordinate of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">w</span><span style="color:##000000">Width of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_set_vline(FlicRaster *r, Pixel color, Coor x, Coor y, Ucoor h);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Draws a solid vertical line segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">color</span><span style="color:##000000">Color of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">X coordinate of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Top end of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">h</span><span style="color:##000000">Height of segment.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_set_rect(FlicRaster *r, Pixel color, Coor x, Coor y, Ucoor w, Ucoor h);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Draws a solid color rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">color</span><span style="color:##000000">Color of rectangle.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">Left edge.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Top edge.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">w</span><span style="color:##000000">Width.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">h</span><span style="color:##000000">Height.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_set_rast(FlicRaster *r, Pixel color);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Sets an entire raster to a solid color.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">color</span><span style="color:##000000">Color.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_xor_rect(FlicRaster *r, Pixel color, Coor x, Coor y, Ucoor w, Ucoor h);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Exclusive-ORs a rectangle in a raster with a solid color. &nbsp;&nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">color</span><span style="color:##000000">Color to XOR rectangle with.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">Left edge.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Top edge.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">w</span><span style="color:##000000">Width.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">h</span><span style="color:##000000">Height.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_mask1blit(UBYTE *mbytes, Coor mbpr, Coor mx, Coor my, FlicRaster *r, Coor rx, Coor ry, Ucoor width, Ucoor height, Pixel oncolor );</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Expands a rectangle from a bitmap in memory to a full-pixel image in the raster. &nbsp;Zeros in the bitmap are left unchanged in the raster and ones in the bitmap are changed to </span><span style="font-weight:bold;color:##000000">oncolor</span><span style="color:##000000"> (ie, a transparent blit).</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">mbytes</span><span style="color:##000000">Pointer to a block of memory arranged as a two-dimensional</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /> bitmap. &nbsp;In the bitmap, bits are packed into bytes with the leftmost bits stored in the uppermost bits of each byte.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">mbpr</span><span style="color:##000000">The number of bytes per line within the bitmap.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">mx</span><span style="color:##000000">,</span><span style="font-weight:bold;color:##000000">my</span><span style="color:##000000">The coordinates of the upper-left corner of the area to expand from within the bitmap.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Destination raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">rx</span><span style="color:##000000">,</span><span style="font-weight:bold;color:##000000">ry</span><span style="color:##000000">The coordinates of the upper-left corner of the destination rectangle to expand into within the raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of rectangle to expand, in pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of rectangle to expand, in pixels.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">oncolor</span><span style="color:##000000">Ones in the source bitmap get mapped to this color in the destination raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:void</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_mask2blit(UBYTE *bitplane, Coor mbpr, Coor mx, Coor my, &nbsp;FlicRaster *r, Coor rx, Coor ry, coor width, Ucoor height, Pixel oncolor, Pixel offcolor);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Expands a rectangle from a memory bitmap to a raster. &nbsp;Zeros in the bitmap are mapped to </span><span style="font-weight:bold;color:##000000">offcolor</span><span style="color:##000000"> in the raster and ones are mapped to </span><span style="font-weight:bold;color:##000000">oncolor</span><span style="color:##000000">. &nbsp;This function is similar to </span><span style="font-weight:bold;color:##000000">pj_mask1blit()</span><span style="color:##000000">, except that it is an opaque rather than transparent blit. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">mbytes</span><span style="color:##000000">Pointer to a block of memory arranged as a two-dimensional bitmap. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">mbpr</span><span style="color:##000000">The number of bytes per line within the bitmap.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">mx</span><span style="color:##000000">,</span><span style="font-weight:bold;color:##000000">my</span><span style="color:##000000">The coordinates of the upper-left corner of the area to expand in the bitmap.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Destination raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">rx</span><span style="color:##000000">,</span><span style="font-weight:bold;color:##000000">ry</span><span style="color:##000000">The coordinates of the upper-left corner of the destination rectangle to be expanded in the raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of rectangle to expand.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of rectangle to expand.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">oncolor</span><span style="color:##000000">Ones in the source bitmap are mapped to this color in the destination raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">offcolor</span><span style="color:##000000">Zeros in the source bitmap are mapped to this color in the destination raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_blitrect(FlicRaster *source, Coor src_x, Coor src_y,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">FlicRaster *dest, Coor dest_x, Coor dest_y, Coor width, Coor height)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies all pixels from one rectangular area to another. &nbsp;The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be the same raster; the case of overlapping source and dest rectangles is handled properly. &nbsp;The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be different types and sizes of raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000">Source raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">src_x</span><span style="color:##000000">Left edge of rectangle in source.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">src_y</span><span style="color:##000000">Top edge in source.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000">Destination raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest_x</span><span style="color:##000000">Left edge of rectangle in destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest_y</span><span style="color:##000000">Top edge in destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of rectangle to copy.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of rectangle to copy.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_tblitrect(FlicRaster *s, Coor sx, Coor sy, FlicRaster *d, Coor dx, Coor dy, Coor width, Coor height, Pixel tcolor)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Transparently copies pixels from one rectangular area to another. &nbsp;Pixels in the source that are the same color as </span><span style="font-weight:bold;color:##000000">tcolor</span><span style="color:##000000"> are not copied; the corresponding pixel in the destination raster is unchanged. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be the same raster; the case of overlapping source and dest rectangles is handled properly. &nbsp;The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be different types and sizes of raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000">Source raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">src_x</span><span style="color:##000000">Left edge of rectangle in source.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">src_y</span><span style="color:##000000">Top edge in source.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000">Destination raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest_x</span><span style="color:##000000">Left edge of rectangle in destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest_y</span><span style="color:##000000">Top edge in destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of rectangle to copy.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of rectangle to copy.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">tcolor</span><span style="color:##000000">Transparent color of source.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_swaprect(FlicRaster *ra, Coor ax, Coor ay, FlicRaster *rb, Coor bx, Coor by, Coor width, Coor height)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Exchanges all pixels in a pair of rectangular areas. &nbsp;The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be the same raster; the case of overlapping source and dest rectangles is handled properly. &nbsp;The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be different types and sizes of raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">ra</span><span style="color:##000000">Source raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ax</span><span style="color:##000000">Left edge of rectangle in raster </span><span style="font-weight:bold;color:##000000">ra</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ay</span><span style="color:##000000">Top edge of rectangle in raster </span><span style="font-weight:bold;color:##000000">ra</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">rb</span><span style="color:##000000">Destination hardware raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">bx</span><span style="color:##000000">Left edge of rectangle in raster </span><span style="font-weight:bold;color:##000000">rb</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">by</span><span style="color:##000000">Top edge of rectangle in raster </span><span style="font-weight:bold;color:##000000">rb</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of rectangle to swap.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of rectangle to swap.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_xor_rast(FlicRaster *s, FlicRaster *d);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Exclusive-ORs all pixels in raster </span><span style="font-weight:bold;color:##000000">s</span><span style="color:##000000"> against the pixels in raster </span><span style="font-weight:bold;color:##000000">d</span><span style="color:##000000">, putting the result into </span><span style="font-weight:bold;color:##000000">d</span><span style="color:##000000">. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The source and destination may </span><span style="font-style:italic;color:##000000">not</span><span style="color:##000000"> be the same raster. &nbsp;The two rasters </span><span style="font-style:italic;color:##000000">must</span><span style="color:##000000"> be the same dimensions, but may be of differing types.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">s</span><span style="color:##000000">Source raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">d</span><span style="color:##000000">Destination raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_zoomblit(FlicRaster *source, Coor src_x, Coor src_y, FlicRaster *dest, Coor dest_x, Coor dest_y, Ucoor width, Ucoor height, LONG zoom_x, LONG zoom_y )</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Copies a rectangular area of the source raster to the destination raster, expanding each pixel into a box that is </span><span style="font-weight:bold;color:##000000">zoom_x</span><span style="color:##000000"> by </span><span style="font-weight:bold;color:##000000">zoom_y</span><span style="color:##000000"> in size.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000"> values are expressed in destination coordinates. &nbsp;It is possible that </span><span style="font-weight:bold;color:##000000">width</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"><br /></span><span style="color:##000000"> will not be an exact multiple of </span><span style="font-weight:bold;color:##000000">zoom_x</span><span style="color:##000000"> and likewise </span><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000"> not an integral multiple of </span><span style="font-weight:bold;color:##000000">zoom_y</span><span style="color:##000000">. &nbsp;In this case the expanded pixels on the right and bottom edges are clipped. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be the same raster; the case of overlapping source and dest rectangles is handled properly. &nbsp;The </span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000"> rasters may be different types and sizes of raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">source</span><span style="color:##000000">Source raster. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">src_x</span><span style="color:##000000">Left edge of source.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">src_y</span><span style="color:##000000">Upper edge of source.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest</span><span style="color:##000000">Destination raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest_x</span><span style="color:##000000">Left edge of destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">dest_y</span><span style="color:##000000">Upper edge of destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of destination... </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Width of source is:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">&nbsp;</span><span style="font-weight:bold;color:##000000">(width+zoom_x-1)/zoom_x</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Height of source is:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">&nbsp;</span><span style="font-weight:bold;color:##000000">(width+zoom_y-1)/zoom_y</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">zoom_x</span><span style="color:##000000">Amount to stretch each pixel in horizonal direction.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">zoom_y</span><span style="color:##000000"> Amount to stretch each pixel in vertical direction.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_unbrun_rect(FlicRaster *r, void *ucbuf, long pixsize,</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Coor x, Coor y, Ucoor width, Ucoor height);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Un-run-length-compresses from memory onto the raster. &nbsp;The </span><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000"> values must always exactly match the width and height of the output raster. &nbsp;Also, they must be the width and height of the original source data when it was compressed.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">This routine </span><span style="font-style:italic;color:##000000">does not</span><span style="color:##000000"> perform width or height clipping. &nbsp;It will fail if the width and height rules listed above are not followed.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ucbuf</span><span style="color:##000000">Compressed image data. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixsize</span><span style="color:##000000">Size in bytes of a single pixel. &nbsp;Always 1 in this version of the software.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">Left edge of decompression destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Top edge.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of decompression destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_unss2_rect(FlicRaster *r, void *ucbuf, long pixsize, Coor xstart, Coor ystart, Ucoor width, Ucoor height);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Un-delta-compresses from memory onto the raster. &nbsp;This is the main decompression routine for Animator Pro FLC-format files; all frames (other than the first frame) are compressed in this format, if compressed at all.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000"> and </span><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000"> values must always exactly match the width and height of the output raster. &nbsp;Also, they must be the width and height of the original source data when it was compressed.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">This routine </span><span style="font-style:italic;color:##000000">does not</span><span style="color:##000000"> perform width or height clipping. &nbsp;It will fail if the width and height rules listed above are not followed.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ucbuf</span><span style="color:##000000">Compressed delta image. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixsize</span><span style="color:##000000">Size in bytes of a pixel. &nbsp;Always 1 for now.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">xstart</span><span style="color:##000000">Left edge of each line of the decompression destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ystart</span><span style="color:##000000">Top edge.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of decompression destination. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height of destination.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_unlccomp_rect(FlicRaster *r, void *ucbuf, long pixsize, Coor x, Coor y, Ucoor width, Ucoor height);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Un-delta-compresses from memory onto the raster. &nbsp;This is the main decompression routine for Animator 1.0 FLI-format files; all frames (other than the first frame) are compressed in this format, if compressed at all.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">This routine </span><span style="font-style:italic;color:##000000">does not</span><span style="color:##000000"> perform width or height clipping. &nbsp;It will fail if the width and height rules listed above are not followed.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ucbuf</span><span style="color:##000000">Compressed delta image. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">pixsize</span><span style="color:##000000">Size in bytes of a pixel. &nbsp;Always 1 for now.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">x</span><span style="color:##000000">Left edge of area to decompress into.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">y</span><span style="color:##000000">Top edge.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">width</span><span style="color:##000000">Width of area to decompress into.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">height</span><span style="color:##000000">Height.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_set_colors(FlicRaster *r, long start, long count, void *rgb_buf);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Sets a portion of the hardware color map to the rgb values contained in cbuf. &nbsp;This function does nothing if </span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000"> is not a video hardware raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">This function </span><span style="font-style:italic;color:##000000">does not </span><span style="color:##000000">update the RAM-based color map attached to the raster; it updates video hardware color registers only. &nbsp;We recommend that you alter colors by first changing the RAM-based color map, then calling </span><span style="font-weight:bold;color:##000000">pj_cmap_update()</span><span style="color:##000000"> rather that using this function to alter the hardware directly.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">start</span><span style="color:##000000">Start index in color map between 0 and 255.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">count</span><span style="color:##000000">Number of colors to set between 0 and 256.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">rgb_buf</span><span style="color:##000000">Pointer to rgb data. &nbsp;For each color to be changed there are 3 bytes - one each for red, green and blue. &nbsp;The values of these color components range from 0 to 255.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_wait_rast_vsync(FlicRaster *r);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Waits until the monitor is in vertical blank. &nbsp;This function returns immediately when </span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000"> is not a video hardware raster. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_uncc256(FlicRaster *r, void *ucbuf);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Decompresses a delta color map. &nbsp;This function does nothing if </span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000"> is not a video hardware raster. &nbsp;This updates the hardware palette registers only, it does not update the RAM-based color map attached to the raster.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ucbuf</span><span style="color:##000000">Compressed color data. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">void pj_uncc64(FlicRaster *r, void *ucbuf);</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Old-style routine to decompress a delta color map. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Same as ucbuf in uncc256, but the rgb data ranges from 0-63 (like the VGA color palette) rather than 0-256.)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">r</span><span style="color:##000000">Raster pointer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">ucbuf</span><span style="color:##000000">Compressed color data. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">SYSLIB - String, Memory, and Unbuffered I/O Functions</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The SYSLIB.H and SYSLIB.LIB files contain the string, memory, and I/O functions listed below. &nbsp;When you request the </span><span style="font-weight:bold;color:##000000">AA_SYSLIB</span><span style="color:##000000"> host library, these functions will be available. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Standard functions supported by AA_SYSLIB:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Please refer to your compiler's runtime library documentation for details on these functions.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;&nbsp;&nbsp;</span><span style="font-weight:bold;color:##000000">free &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;malloc &nbsp;&nbsp;&nbsp;memcmp &nbsp;&nbsp;&nbsp;memcpy</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;memset &nbsp;&nbsp;&nbsp;strcmp &nbsp;&nbsp;&nbsp;strcpy &nbsp;&nbsp;&nbsp;strlen</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;zalloc</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The </span><span style="font-weight:bold;color:##000000">zalloc()</span><span style="color:##000000"> function is identical to </span><span style="font-weight:bold;color:##000000">malloc()</span><span style="color:##000000"> except that it initializes the memory block to zeroes.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Additional functions:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">AA_SYSLIB</span><span style="color:##000000"> supports the following additional functions, not found in standard C runtime libraries. &nbsp;These functions provide unbuffered I/O similar (but </span><span style="font-style:italic;color:##000000">not</span><span style="color:##000000"> identical) to the functions found in a standard runtime library. &nbsp;To use these functions, </span><span style="font-weight:bold;color:##000000">#include</span><span style="color:##000000"> the JFILE.H header file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Jfile pj_open(char *filename, int mode)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Opens a file for unbuffered reading and/or writing.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">filename</span><span style="color:##000000">Name of file to open.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">mode</span><span style="color:##000000">File access mode, one of:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">0</span><span style="color:##000000"> &nbsp;(</span><span style="font-weight:bold;color:##000000">DREADONLY</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">1</span><span style="color:##000000"> &nbsp;(</span><span style="font-weight:bold;color:##000000">DWRITEONLY</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">2</span><span style="color:##000000"> &nbsp;(</span><span style="font-weight:bold;color:##000000">DREADWRITE</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:File handle or </span><span style="font-weight:bold;color:##000000">NULL</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Jfile pj_create(char *filename, int mode)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Creates a new file for unbuffered reading/writing. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Currently, in spite of the mode parameter, the file is always readable and writable.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">filename</span><span style="color:##000000">Name of file to create.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">mode</span><span style="color:##000000">File access mode, one of:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">0</span><span style="color:##000000"> &nbsp;(</span><span style="font-weight:bold;color:##000000">DREADONLY</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">1</span><span style="color:##000000"> &nbsp;(</span><span style="font-weight:bold;color:##000000">DWRITEONLY</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">2</span><span style="color:##000000"> &nbsp;(</span><span style="font-weight:bold;color:##000000">DREADWRITE</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:File handle or </span><span style="font-weight:bold;color:##000000">NULL</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode pj_close(Jfile fhandle)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Closes a file opened via </span><span style="font-weight:bold;color:##000000">pj_open()</span><span style="color:##000000"> or </span><span style="font-weight:bold;color:##000000">pj_create()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">fhandle</span><span style="color:##000000">Handle of file to close.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:</span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000">, or an appropriate </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> value.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">long pj_read(Jfile fhandle, void *buf, long size)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Reads data from file into a memory buffer.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">fhandle</span><span style="color:##000000">File handle returned from </span><span style="font-weight:bold;color:##000000">pj_open()</span><span style="color:##000000"> or </span><span style="font-weight:bold;color:##000000">pj_create()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">buf</span><span style="color:##000000">Memory buffer; destination of read.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">size</span><span style="color:##000000">Number of bytes to read.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:Number of bytes actually read. &nbsp;If zero, you are at end of file. &nbsp;If less than </span><span style="font-weight:bold;color:##000000">size</span><span style="color:##000000"> an error occurred.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">long pj_write(Jfile fhandle, void *buf, long size)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Writes data from a memory buffer into a file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">fhandle</span><span style="color:##000000">File handle returned from </span><span style="font-weight:bold;color:##000000">pj_open()</span><span style="color:##000000"> or </span><span style="font-weight:bold;color:##000000">pj_create()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">buf</span><span style="color:##000000">Memory buffer; source of write.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">size</span><span style="color:##000000">Number of bytes to write.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:Number of bytes actually written. &nbsp;If less than </span><span style="font-weight:bold;color:##000000">size</span><span style="color:##000000"> an error occurred.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">long pj_seek(Jfile fhandle, long offset, int mode)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Seek to an arbitrary location in a file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">fhandle</span><span style="color:##000000">File handle returned from </span><span style="font-weight:bold;color:##000000">pj_open()</span><span style="color:##000000"> or </span><span style="font-weight:bold;color:##000000">pj_create()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">offset</span><span style="color:##000000">New file position. &nbsp;Exact meaning depends on </span><span style="font-weight:bold;color:##000000">mode</span><span style="color:##000000"> parameter.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">mode</span><span style="color:##000000">Can be one of three values:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;</span><span style="font-weight:bold;color:##000000">0</span><span style="color:##000000"> (</span><span style="font-weight:bold;color:##000000">DSEEK_START</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">offset</span><span style="color:##000000"> is relative to the start of the file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;</span><span style="font-weight:bold;color:##000000">1</span><span style="color:##000000"> (</span><span style="font-weight:bold;color:##000000">DSEEK_REL</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">offset</span><span style="color:##000000"> is amount to move from current file position.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;&nbsp;&nbsp;</span><span style="font-weight:bold;color:##000000">2</span><span style="color:##000000"> (</span><span style="font-weight:bold;color:##000000">DSEEK_END</span><span style="color:##000000">)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">offset</span><span style="color:##000000"> is relative to the end of the file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:New file position relative to the start of the file. &nbsp;Negative </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> value if an error occurs.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">long pj_tell(Jfile fhandle)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Returns current file position relative to the start of file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">fhandle</span><span style="color:##000000">File handle returned from </span><span style="font-weight:bold;color:##000000">pj_open()</span><span style="color:##000000"> or </span><span style="font-weight:bold;color:##000000">pj_create()</span><span style="color:##000000">.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:Current file position.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode pj_delete(char *filename)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Deletes a file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">filename</span><span style="color:##000000">Name of file. &nbsp;May include device and directory information.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:</span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000"> if file was deleted, otherwise an </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> that describes the problem.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode pj_rename(char *oldname, char *newname)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Renames a file.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">oldname</span><span style="color:##000000">Current file name.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">newname</span><span style="color:##000000">New file name.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:</span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000"> if file was renamed, otherwise an </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> that describes the problem.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Boolean pj_exists(char *filename)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Determines whether a file exists.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">filename</span><span style="color:##000000">Name of the file to check for.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:</span><span style="font-weight:bold;color:##000000">TRUE</span><span style="color:##000000"> if file exists, </span><span style="font-weight:bold;color:##000000">FALSE</span><span style="color:##000000"> if it does not exist.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode pj_ioerr(void)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Returns the status of the last unbuffered file I/O operation. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">After an unbuffered I/O function has returned a generic error status (e.g., a </span><span style="font-weight:bold;color:##000000">NULL</span><span style="color:##000000"> pointer), this function will return an Animator </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> value that describes the problem in detail.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:(none)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:</span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000"> if the last I/O function worked, otherwise an appropriate </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> value.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">char *pj_get_load_path(void)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Returns the name of the path the REX module was loaded from. &nbsp;Returned string will be in the format:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;&nbsp;</span><span style="font-style:italic;color:##000000">device:\path\etc\yourname.typ</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:(none)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:A pointer to the path. &nbsp;This points into the host data space, do not modify the string in-place!</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">char *pj_get_path_name(char *path)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Returns a pointer to last name in a path (i.e., a pointer to the filename on the end of a full path-with-filename string).</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">path</span><span style="color:##000000">Pointer to pathname.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:Pointer to the last name in the path string.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">char *pj_get_path_suffix(char *path)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Returns pointer to the '.' in the last name in a path, or to the terminating '\0' if the last name does not have a suffix.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:</span><span style="font-weight:bold;color:##000000">path</span><span style="color:##000000">Pointer to pathname.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return Value:Pointer to the suffix of the last name (the '.'), or pointer to '\0'.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"><br /></span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">STDIOLIB - Standard C Stream I/O Functions</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">The STDIO.H and STDIOLIB.LIB files contain the standard stream I/O functions listed below. &nbsp;When you request the </span><span style="font-weight:bold;color:##000000">AA_STDIOLIB</span><span style="color:##000000"> host library, these functions will be available. &nbsp;</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Standard Stream I/O functions supported by AA_STDIOLIB:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Please refer to your compiler's runtime library documentation for details on these functions.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000"> &nbsp;&nbsp;&nbsp;</span><span style="font-weight:bold;color:##000000">clearerr &nbsp;fclose &nbsp;&nbsp;&nbsp;feof &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ferror &nbsp;&nbsp;&nbsp;fflush</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;fgetc &nbsp;&nbsp;&nbsp;&nbsp;fgets &nbsp;&nbsp;&nbsp;&nbsp;fopen &nbsp;&nbsp;&nbsp;&nbsp;fprintf &nbsp;&nbsp;fputc</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;fputs &nbsp;&nbsp;&nbsp;&nbsp;fread &nbsp;&nbsp;&nbsp;&nbsp;fseek &nbsp;&nbsp;&nbsp;&nbsp;ftell &nbsp;&nbsp;&nbsp;&nbsp;fwrite</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000"> &nbsp;&nbsp;&nbsp;printf &nbsp;&nbsp;&nbsp;rewind &nbsp;&nbsp;&nbsp;sprintf &nbsp;&nbsp;ungetc</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;font-size:14pt;color:##000000">Additional functions:</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">AA_STDIOLIB</span><span style="color:##000000"> supports the following additional function, not found in standard C runtime libraries.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-weight:bold;color:##000000">Errcode pj_errno_errcode(void)</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Function:Returns the status of the last stream I/O function. </span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">After a stream I/O function has returned a generic error status (e.g., a </span><span style="font-weight:bold;color:##000000">NULL</span><span style="color:##000000"> pointer), this function will return an Animator </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> value that describes the problem in detail.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Input:None.</span></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="color:##000000">Return value:</span><span style="font-weight:bold;color:##000000">Success</span><span style="color:##000000"> if the last I/O function worked, otherwise an appropriate </span><span style="font-weight:bold;color:##000000">Errcode</span><span style="color:##000000"> value.</span></p>
  </div>
 </body>
</html>
